# =========================
# Runtime / entorno
# =========================
NODE_ENV=development

# =========================
# Infra (comunes a todos)
# =========================
AMQP_URL=amqp://guest:guest@localhost
DATABASE_URL=postgres://postgres:postgres@localhost:5432/lunchday
REDIS_URL=redis://localhost:6379

# =========================
# Integraciones externas
# =========================
# Plaza de mercado (Alegra)
MARKET_URL=https://recruitment.alegra.com/api/farmers-market

# =========================
# Tunables generales
# =========================
# Prefetch por defecto para consumidores RabbitMQ
RMQ_PREFETCH=100

# =========================
# market-adapter-svc
# =========================
# Prefetch específico del market-adapter
MARKET_PREFETCH=30
# Intentos máximos por ingrediente antes de considerar fallo
MARKET_MAX_ATTEMPTS=6
# Backoff base (ms) entre intentos de compra (se escala por intento)
MARKET_BASE_BACKOFF_MS=150

# =========================
# inventory-svc · Reconciler
# =========================
# Reintentos máximos antes de marcar una orden como failed
RECONCILER_MAX_RETRIES=6
# Cada cuánto corre el reconciler (ms)
RECONCILER_EVERY_MS=15000
# Minutos base para cálculo de backoff por intento
RECONCILER_BASE_DELAY_MIN=1
# Límite de órdenes 'pending' a procesar por corrida
RECONCILER_BATCH_LIMIT=200
